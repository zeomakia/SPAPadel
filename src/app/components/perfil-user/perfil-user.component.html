<h2>Perfil de Usuario </h2>
<div class="container" *ngIf="mostrarDatos">
    <div class="shadow p-3 mb-5 bg-white rounded">
      <form [formGroup]="perfilUser" (ngSubmit)="onSubmit()">
        <div class="row">
            <div class="col-md-6">
            <div class="form-group">
                <label for="user">Usuario</label>
             <input type="text" id="user" class="form-control" formControlName="user" required>
             <div *ngIf="perfilUser.get('user')?.touched && perfilUser.get('user')?.invalid">
                <small class="text-danger">Campo requerido</small>
             </div>
            </div>
        </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="nombre">Nombre</label>
              <input type="text" id="nombre" class="form-control" formControlName="nombre" required>
              <div *ngIf="perfilUser.get('nombre')?.touched && perfilUser.get('nombre')?.invalid">
                <small class="text-danger">Campo requerido</small>
              </div>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" class="form-control" formControlName="email" required>
                <div *ngIf="perfilUser.get('email')?.touched && perfilUser.get('email')?.invalid">
                    <small class="text-danger">El email es obligatorio y ha de ser correcto.</small>
                </div>
            </div>
            <div class="form-group">
                <label for="telefono">Teléfono</label>
                <input type="tel" id="telefono" class="form-control" formControlName="telefono" required>
                <div *ngIf="perfilUser.get('telefono')?.touched && perfilUser.get('telefono')?.invalid">
                  <small class="text-danger">Campo requerido</small>
                </div>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
                <label for="apellidos">Apellidos</label>
                <input type="text" id="apellidos" class="form-control" formControlName="apellidos" required>
                <div *ngIf="perfilUser.get('apellidos')?.touched && perfilUser.get('apellidos')?.invalid">
                  <small class="text-danger">Campo requerido</small>
                </div>
            </div>
            <div class="form-group">
              <label for="edad">Edad</label>
              <input type="number" id="edad"  class="form-control" formControlName="edad" required>
              <div *ngIf="perfilUser.get('edad')?.touched && perfilUser.get('edad')?.invalid">
                <small class="text-danger">Campo requerido</small>
              </div>
            </div>
           
          </div>
        </div>
        <button style="margin-top: 10px;" type="button" class="btn btn-outline-primary" (click)="showChangePassword = !showChangePassword">Modificar Contraseña</button>
        <div *ngIf="showChangePassword">
            <div class="row">
             <div class="col-md-6">
                <div class="form-group">
                  <div class="mb-3 position-relative">
                    <label for="actualPassword">Contraseña Actual</label>
                    <input [type]="hide ? 'password' : 'text'" id="actualPassword" class="form-control" formControlName="actualPassword" required>
                    <span class="toggle-password position-absolute" (click)="toggle()" style="right: 10px; top: 50%; transform: translateY(-50%);">
                        <i class="bi" [ngClass]="hide ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
                    </span>
                  </div>
                </div>  
             </div>
            </div>  
            <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <div class="mb-3 position-relative">
                      <label for="password">Contraseña</label>
                      <input [type]="hide2 ? 'password' : 'text'"  id="password" class="form-control" formControlName="password" required>
                      <span class="toggle-password position-absolute" (click)="toggle2()" style="right: 10px; top: 50%; transform: translateY(-50%);">
                          <i class="bi" [ngClass]="hide2 ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
                      </span>
                    </div>
                    <div *ngIf="perfilUser.errors?.['passwValid']">
                        <small class="text-danger">Campo requerido</small>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="mb-3 position-relative">
                      <label for="confirmPassword">Confirmar Contraseña</label>
                      <input [type]="hide3 ? 'password' : 'text'" id="confirmPassword" class="form-control" formControlName="confirmPassword" required>
                      <span class="toggle-password position-absolute" (click)="toggle3()" style="right: 10px; top: 50%; transform: translateY(-50%);">
                          <i class="bi" [ngClass]="hide3 ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
                      </span>
                    </div>
                    <div *ngIf="perfilUser.errors?.['passwValid']">
                        <small class="text-danger">Campo requerido e igual a la nueva contraseña</small>
                    </div>
                </div>
            </div>
            </div> 
        </div>
        <div class="d-flex justify-content-between" style="margin-top: 10px;">
          <button type="submit" class="btn btn-primary" (click)="updateUserProfile()" [disabled]="perfilUser.invalid">Guardar</button>
          <button type="button" class="btn btn-danger" (click)="onCancel()">Cancelar</button>
          <button type="button" class="btn btn-danger" style="background-color: black;" (click)="logOut()">LogOut</button>
        </div>
      </form>
    </div>
  </div>